:root{
  --primary-color:#ffffff;
  --secondary-color:#ffffff;
  --tertiary-color:#1e90ff;
  --text-color:#0f172a;
  --muted:#64748b;
}

/* ====== SECTION WRAPPER ====== */
.gallerySection{
  position:relative;
  padding: clamp(36px, 6vw, 64px) 16px;
  width:100%;
  font-family:var(--font, "Segoe UI", system-ui, sans-serif);
  color:var(--text-color);
  container-type: inline-size;
}
.header{ text-align:center; margin-bottom: clamp(18px, 3.2vw, 28px); }
.heading{
  font-size: clamp(22px, 4.8vw, 36px);
  font-weight: 900;
  margin:0 0 8px;
}
.subtitle{
  color: color-mix(in oklab, var(--text-color) 68%, transparent);
  margin: 0 auto;
  max-width: 780px;
}

/* ====== Toolbar ====== */
.toolbar{
  position:absolute;
  top:12px;
  inset-inline-end:12px;
  display:flex;
  gap:8px;
  z-index:6;
}
.iconBtn{
  width:36px;height:36px;border-radius:999px;
  display:inline-flex;align-items:center;justify-content:center;
  background:color-mix(in oklab,var(--text-color) 28%,transparent);
  color:#fff;
  border:1px solid color-mix(in oklab,var(--text-color) 24%,transparent);
  box-shadow:0 6px 18px -8px color-mix(in oklab,var(--text-color) 32%,transparent);
  cursor:pointer;
  transition: background .15s ease, transform .15s ease, box-shadow .15s ease;
}
.iconBtn:hover{ background:color-mix(in oklab,var(--text-color) 38%,transparent); transform: translateY(-2px); }
.trashBtn{ background:color-mix(in oklab,#d90429 45%,transparent); border-color:color-mix(in oklab,#d90429 35%,transparent); }
.trashBtn:hover{ background:color-mix(in oklab,#d90429 60%,transparent); }

/* ====== GRID (V1) ====== */
.grid{ display:grid; gap: var(--gap, 12px); }
.columns-auto{ grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); }
.columns-2{ grid-template-columns: repeat(2, minmax(0,1fr)); }
.columns-3{ grid-template-columns: repeat(3, minmax(0,1fr)); }

.gapTight{ --gap: 8px; }
.gapNormal{ --gap: 12px; }
.gapLoose{ --gap: 18px; }

.rounded img, .rounded .placeholder { border-radius: 14px; }

.item{ position: relative; }
.imgWrap{ width: 100%; height: 100%; position: relative; }
.item img{ display:block; width:100%; height:100%; object-fit:cover; border-radius: 14px; }

/* ====== Placeholder (מסגרת מקווקוות + 2 כפתורים בפנים) ====== */
.placeholder{
  display:grid; place-items:center;
  width:100%;
  aspect-ratio: 4/3;
  border:2px dashed color-mix(in oklab, var(--text-color) 28%, transparent);
  color: color-mix(in oklab, var(--text-color) 65%, transparent);
  background:
    radial-gradient(40% 60% at 10% 10%, color-mix(in oklab, var(--tertiary-color) 10%, transparent), transparent),
    radial-gradient(50% 70% at 90% 20%, color-mix(in oklab, var(--tertiary-color) 12%, transparent), transparent),
    color-mix(in oklab, var(--primary-color) 96%, transparent);
  border-radius:14px;
  text-align: center;
  padding: 12px;
}
.placeholderInner{
  display:flex;
  flex-direction:column;
  gap:10px;
  align-items:center;
}
.placeholderBtns{
  display:flex;
  gap:8px;
}
.pBtn{
  border:none;
  border-radius:999px;
  padding:8px 12px;
  font-weight:800;
  cursor:pointer;
  box-shadow: 0 14px 24px -16px rgba(0,0,0,.35);
}
.uploadBtn{ background:#0ea5e9; color:#fff; }
.pexelsBtn{ background:#059669; color:#fff; }

/* תמונה קיימת */
.hasImage img{ box-shadow: 0 10px 28px -18px rgba(0,0,0,.35); }

.overlayGrad{
  position:absolute; inset:0;
  background: linear-gradient(to top, rgba(0,0,0,.35), rgba(0,0,0,.0) 58%);
  border-radius: 14px;
  pointer-events:none;
}

/* ratio helpers (V1) */
.square .imgWrap{ aspect-ratio: 1 / 1; }
.portrait .imgWrap{ aspect-ratio: 3 / 4; }
.landscape .imgWrap{ aspect-ratio: 16 / 9; }

/* ====== ACTIONS (hover או תמיד כשאין תמונה) ====== */
.actions{
  position:absolute;
  inset-inline-end: 10px;
  bottom: 10px;
  display:flex; gap:8px;
  opacity:0; transform: translateY(6px);
  transition: .15s ease;
  z-index:3;
}
.actionsAlways{ opacity:1 !important; transform: translateY(0) !important; }
.item:hover .actions,
.msItem:hover .actions,
.rowItem:hover .actions{ opacity:1; transform: translateY(0); }

.hiddenInput{ display:none; }

.actBtn{
  border:none;
  border-radius: 999px;
  padding: 8px 12px;
  font-weight: 900;
  cursor: pointer;
  box-shadow: 0 14px 24px -16px rgba(0,0,0,.5);
  transition: transform .12s ease, filter .12s ease;
  letter-spacing: .1px;
}
.actBtn:hover{ transform: translateY(-1px) scale(1.02); filter: brightness(1.04); }
.replaceBtn{ background:#334155; color:#fff; }
.removeBtnTone{ background:#b91c1c; color:#fff; }
.uploadBtn{ background:#0ea5e9; color:#fff; }
.pexelsBtn{ background:#059669; color:#fff; }

/* כפתור מחיקה קטן בראש האריח */
.removeBtn{
  position:absolute;
  top:8px;
  inset-inline-start:8px;
  z-index:4;
  border:none;
  background: rgba(0,0,0,.58);
  color:#fff;
  border-radius: 10px;
  padding: 6px 8px;
  cursor:pointer;
  opacity:0; transform: translateY(-4px);
  transition:.15s;
}
.item:hover .removeBtn,
.msItem:hover .removeBtn,
.rowItem:hover .removeBtn{ opacity:1; transform: translateY(0); }

.badge{
  position:absolute;
  top:8px;
  inset-inline-end:8px;
  background: color-mix(in oklab, var(--tertiary-color) 90%, #3f88ff);
  color:#fff;
  font-weight: 900;
  border-radius: 999px;
  font-size:12px;
  padding: 4px 8px;
  z-index:4;
  box-shadow: 0 14px 32px -18px rgba(0,0,0,.5);
}

/* מצב העלאה */
.busyOverlay{
  position:absolute; inset:0;
  display:grid; place-items:center;
  background: rgba(255,255,255,.55);
  backdrop-filter: blur(2px);
  z-index:5;
  border-radius: 14px;
}
.spinner{
  width:28px; height:28px; border-radius:50%;
  border:3px solid rgba(0,0,0,.15);
  border-top-color: color-mix(in oklab, var(--tertiary-color) 80%, transparent);
  animation: spin 1s linear infinite;
}
@keyframes spin{ to { transform: rotate(360deg); } }

/* שגיאה */
.errorMsg{
  margin-top:6px;
  color:#b91c1c;
  font-size:12px;
}

/* Drag & Drop highlight */
.dropActive .placeholder,
.dropActive .imgWrap{
  outline: 2px dashed color-mix(in oklab, var(--tertiary-color) 64%, transparent);
  outline-offset: 4px;
}

/* ====== Masonry (V2) ====== */
.masonry{
  column-gap: var(--gap, 12px);
  --gap: 12px;
  columns: 1;
}
@container (min-width: 520px){
  .masonry{ columns: 2; }
}
@container (min-width: 880px){
  .masonry{ columns: 3; }
}
.msItem{
  position:relative;
  break-inside: avoid;
  margin-bottom: var(--gap, 12px);
  border-radius: 14px;
  overflow:hidden;
  background: color-mix(in oklab, var(--primary-color) 96%, transparent);
  outline: 1px solid color-mix(in oklab, var(--text-color) 10%, transparent);
}
.msItem img{ display:block; width:100%; height:auto; }

/* ====== Rows (V3) ====== */
.rows{
  display:grid;
  gap: var(--gap, 12px);
}
.rowItem{
  position:relative;
  border-radius: 14px;
  overflow: hidden;
  background: color-mix(in oklab, var(--primary-color) 96%, transparent);
  outline: 1px solid color-mix(in oklab, var(--text-color) 10%, transparent);
}
.rowItem img{ display:block; width:100%; height:auto; }
.rowItem .placeholder{ aspect-ratio: 16/9; }

/* ====== Captions ====== */
figcaption{
  margin-top:6px;
  font-size: 13px;
  color: var(--muted);
}

/* ====== Responsive ====== */
@media (max-width: 680px){
  .columns-2, .columns-3{ grid-template-columns: 1fr; }
}

.empty{
  border:1px dashed color-mix(in oklab, var(--text-color, #0f172a) 35%, transparent);
  border-radius: 14px;
  padding: clamp(28px, 6vw, 56px);
  background: color-mix(in oklab, var(--primary-color, #fff) 94%, transparent);
  display:grid; place-items:center; text-align:center;
  min-height: 280px;
}
.emptyInner{ display:grid; gap:12px; justify-items:center; }
.emptyIcon{ font-size: 42px; opacity:.8; }
.emptyTitle{ margin:0; font-size: clamp(18px, 2.2vw, 22px); }
.emptySub{ margin:0; color: var(--muted,#64748b) }
.emptyActions{ display:flex; gap:10px; margin-top:6px; flex-wrap:wrap; justify-content:center; }

.pBtn{
  border:1px solid color-mix(in oklab, var(--text-color,#0f172a) 20%, transparent);
  border-radius: 10px; padding:10px 14px;
  background:#fff; cursor:pointer; font-weight:600;
  box-shadow: 0 8px 20px rgba(15,23,42,.06);
  transition: transform .12s ease, box-shadow .12s ease;
}
.pBtn:hover{ transform: translateY(-1px); box-shadow: 0 16px 38px rgba(15,23,42,.10) }
.pexelsBtn{ background: color-mix(in oklab, #60a5fa 20%, #fff); }

.emptyHint{ color: var(--muted,#64748b); font-size:.95rem; margin-top:2px; }

.hiddenInput{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
